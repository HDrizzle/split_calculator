function startUpdate(){asyncRequest("GET","stats.json","","",function(t,e){200==t&&dataRetrieved(e)},document.getElementById("update-status"))}function dataRetrieved(t){window.serverLog=JSON.parse(t),updateIPAddresses()}function updateIPAddresses(){var t=window.serverLog,e=Object();for(i=0;i<t.length;i++)if(Object.hasOwn(e,t[i].ip)){var d=e[t[i].ip];d[0]<t[i].t&&(d[0]=t[i].t),d[1]++}else e[t[i].ip]=[t[i].t,1];var s=document.getElementById("ip-address-table-data");s.innerHTML="<tr><th>Address</th><th># of visits</th><th>Most recent visit</th></tr>";var r=Object.keys(e);for(i=0;i<r.length;i++){var a=r[i];s.innerHTML+="<tr><td><code>"+a+"</code></td><td>"+e[a][1]+"</td><td>"+timeStampToDateTime(e[a][0])+"</td></tr>"}}function plotVisitHistogram(){var t=Date.now()-86400,e=[];for(i=0;i<window.serverLog.length;i++){var d=window.serverLog[i];d.t>=t&&e.push(d)}new Chart("site-visits-histogram",{type:"bar",data:{},options:{legend:{display:!1},title:{display:!0,text:"World Wine Production 2018"}}})}window.onload=function(){startUpdate()};